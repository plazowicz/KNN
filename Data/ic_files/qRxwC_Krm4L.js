/*!CK:1882328780!*//*1380456939,178158627*/

if (self.CavalryLogger) { CavalryLogger.start_js(["Eq+rK"]); }

__d("ModuleDependencies",[],function(a,b,c,d,e,f){function g(k,l,m){var n=a.require.__debug.modules[m],o=a.require.__debug.deps;if(l[m])return;l[m]=true;if(!n){o[m]&&(k[m]=true);return;}if(!n.dependencies||!n.dependencies.length){if(n.waiting)k[m]=true;return;}n.dependencies.forEach(function(p){g(k,l,p);});}function h(k){if(a.require.__debug){var l={};g(l,{},k);var m=Object.keys(l);m.sort();return m;}return null;}function i(){var k={loading:{},missing:[]};if(!a.require.__debug)return k;var l={},m=a.require.__debug.modules,n=a.require.__debug.deps;for(var o in m){var p=m[o];if(p.waiting){var q={};g(q,{},p.id);delete q[p.id];k.loading[p.id]=Object.keys(q);k.loading[p.id].sort();k.loading[p.id].forEach(function(r){if(!(r in m)&&n[r])l[r]=1;});}}k.missing=Object.keys(l);k.missing.sort();return k;}var j={getMissing:h,getNotLoadedModules:i};e.exports=j;});
__d("ChatSidebarLog",["AsyncSignal","Bootloader","ModuleDependencies","JSLogger","Run"],function(a,b,c,d,e,f){var g=b('AsyncSignal'),h=b('Bootloader'),i=b('ModuleDependencies'),j=b('JSLogger'),k=b('Run'),l=j.create('chat_sidebar_load'),m=null,n=false,o=(Math.random()*2147483648|0).toString(36),p=Date.now();k.onLoad(function(){n=true;});try{d(['ChatSidebar'],function(u){m=u;});}catch(q){l.warn('exception',{reason:q.toString()});}function r(u,v){if(u.length>v)return u[v];return null;}function s(u){setTimeout(function(){var v=i.getMissing('ChatSidebar'),w=h.getErrorUrls(),x=h.getLoadingUrls(),y=[];for(var z in x)y.push({url:z,time:x[z]});y.sort(function(ba,ca){return ca.time-ba.time;});var aa={start_gap:p-h.getStartTime(),page_loaded:n,page_id:o,timeout:u,missing_total:v.length,module_1:r(v,0),module_2:r(v,1),module_3:r(v,2),error_url_total:w.length,error_url_1:r(w,0),error_url_2:r(w,1),error_url_3:r(w,2),loading_url_total:y.length,loading_url_1:r(y,0)?r(y,0).url:null,loading_time_1:r(y,0)?r(y,0).time:null,loading_url_2:r(y,1)?r(y,1).url:null,loading_time_2:r(y,1)?r(y,1).time:null,loading_url_3:r(y,2)?r(y,2).url:null,loading_time_3:r(y,2)?r(y,2).time:null};if(!m){l.warn('require_'+u,{missing:v});aa.symptom='require';}if(m&&!m.isInitialized()){l.warn('init_'+u,{missing:v});aa.symptom='init';}if(aa.symptom)new g('/ajax/chat/sidebar_load.php',aa).send();},u);}var t={start:function(){s(5000);s(10000);s(15000);s(30000);s(60000);}};e.exports=t;});
__d("FbdEventLog",["URI","AsyncSignal"],function(a,b,c,d,e,f){var g=b('URI'),h=b('AsyncSignal'),i={log:function(j,k,l,m){if(!j)return;var n=g('/desktop/eventlog.php'),o=new h(n.toString(),{event:j,category:k||'unknown',payload:l||''});o.setHandler(m).send();}};e.exports=i;});
__d("DownloadDialog",["Arbiter","DataStore","Event","ModalMask","Overlay","Parent","Style","copyProperties","emptyFunction"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('DataStore'),i=b('Event'),j=b('ModalMask'),k=b('Overlay'),l=b('Parent'),m=b('Style'),n=b('copyProperties'),o=b('emptyFunction');for(var p in k)if(k.hasOwnProperty(p))r[p]=k[p];var q=k===null?null:k.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=k;function r(){k.call(this);return this;}r.prototype.init=function(s,t){q.init.call(this,s);this.position=t;var u=(h.get(this._root,'modal')==='true');r.hideDialog(t);r.activeDialogs[t]=this;i.listen(this._root,'click',function(event){if(l.byClass(event.getTarget(),'closeButton'))if(this._cancelHandler()!==false)r.hideDialog(this.position);}.bind(this));this.subscribe('show',function(){if(u)j.show();g.inform('layer_shown',{type:'DownloadDialog'});}.bind(this));this.subscribe('hide',function(){if(u)j.hide();g.inform('layer_hidden',{type:'DownloadDialog'});this._closeHandler();}.bind(this));};r.prototype.setWidth=function(s){this._width=Math.floor(s);return this;};r.prototype.updatePosition=function(){if(this._width)m.set(this._overlay,'width',this._width+'px');return true;};r.prototype.setCancelHandler=function(s){this._cancelHandler=s||o;return this;};r.prototype.setCloseHandler=function(s){this._closeHandler=s||o;return this;};r.dismissAll=function(){for(var s in this.POSITIONS)this.hideDialog(this.POSITIONS[s]);};r.hideDialog=function(s){var t=this.activeDialogs[s];t&&t.hide();this.activeDialogs[s]=null;};n(r,{POSITIONS:{BOTTOM_LEFT:'bottom_left',TOP_LEFT:'top_left',IE9_BOTTOM:'ie9_bottom'},activeDialogs:{}});n(r.prototype,{_cancelHandler:o,_closeHandler:o,_width:null,position:r.POSITIONS.BOTTOM_LEFT});e.exports=r;a.DownloadDialog=r;});
__d("FbdConversionTracking",["AsyncRequest","emptyFunction"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('emptyFunction'),i={logClick:function(j,k){if(!k)k='desktop';new g().setURI('/ajax/desktop/log_clicks.php').setData({click_source:j,promo:k}).setAllowCrossPageTransition(true).setErrorHandler(h).send();},logConversion:function(j,k){if(!k)k='desktop';new g().setURI('/ajax/desktop/log_conversions.php').setData({conversion_action:j,promo:k}).setAllowCrossPageTransition(true).setErrorHandler(h).send();}};e.exports=i;});
__d("MegaphoneHelper",["JSXDOM","Animation","Arbiter","AsyncRequest","DOM","DOMDimensions","Dialog","LitestandMessages","Parent","Run","Style","csx","cx","ge"],function(a,b,c,d,e,f){var g=b('JSXDOM'),h=b('Animation'),i=b('Arbiter'),j=b('AsyncRequest'),k=b('DOM'),l=b('DOMDimensions'),m=b('Dialog'),n=b('LitestandMessages'),o=b('Parent'),p=b('Run'),q=b('Style'),r=b('csx'),s=b('cx'),t=b('ge');function u(){var w=k.scry(document.body,'.megaphone_story_wrapper')[0];w&&k.remove(w);v.removeLitestandHomeWash();}var v={hideStory:function(w,x,y,z,aa){var ba={mp_id:w,location:x,context:z};new j().setURI('/ajax/megaphone/megaphone_hide.php').setMethod('POST').setData(ba).setHandler(function(da){aa&&aa(da);}).send();var ca=t(y);if(ca)new h(ca).to('height',0).duration(500).hide().go();},createModalStory:function(w,x,y,z){var aa;if(!w.buttons||!w.buttons.length){w.buttons=m.CLOSE;aa=v.hideStory(x,y,z,null);}var ba=new m(w);if(aa)ba.setHandler(aa);ba.show();},buttonOnClick:function(w,x,y,z,aa,ba){var ca=function(){if(aa){new j().setURI(z).send();}else document.location.href=z;};if(ba){v.hideStory(w,x,'',y,ca);}else ca();},renderFullWidth:function(w,x,y){var z=t(w);k.prependContent(z,x);if(y){var aa=l.getElementDimensions(x),ba=g.div({className:"_5847"});q.set(ba,'height',aa.height+'px');var ca=o.byClass(z,"_4_37");k.prependContent(ca,ba);p.onLeave(u);i.subscribeOnce(n.FILTER_SWITCH_BEGIN,u);}i.inform('Megaphone/show',w,i.BEHAVIOR_PERSISTENT);},removeLitestandHomeWash:function(){var w=k.find(document.body,"._5847");k.remove(w);}};e.exports=v;});
__d("FbdInstall",["$","AsyncRequest","CSS","DOM","DownloadDialog","FbdConversionTracking","FbdEventLog","FBDesktopDetect","FBDesktopPlugin","MegaphoneHelper"],function(a,b,c,d,e,f){var g=b('$'),h=b('AsyncRequest'),i=b('CSS'),j=b('DOM'),k=b('DownloadDialog'),l=b('FbdConversionTracking'),m=b('FbdEventLog'),n=b('FBDesktopDetect'),o=b('FBDesktopPlugin'),p=b('MegaphoneHelper'),q=1000,r=300*q,s={cancelSetup:function(){var t=JSON.stringify({ref:this.ref});m.log('download_canceled','setup',t);l.logConversion('download_canceled');},hideMegaphone:function(){if(this.megaphoneId&&this.megaphoneLoc)p.hideStory(this.megaphoneId,this.megaphoneLoc,this.elementId,'',null);},init:function(t,u){this.downloadUrl=t;this.ref=u||'unknown';},initInstallWait:function(t,u,v){this.megaphoneId=t;this.megaphoneLoc=u;this.elementId=v;this._waitForInstall(r);},promptDownload:function(t){t=t||this.downloadUrl;if(t){var u=JSON.stringify({ref:this.ref});m.log('download_prompted','setup',u);l.logConversion('download_prompted');var v=j.create('iframe',{src:t,className:'hidden_elem'});j.appendContent(document.body,v);}},_responseHandler:function(t){if(t.payload){this._authToken=t.payload.access_token;this._userId=t.payload.id;}if(this._authToken&&this._userId){this._waitForRunningStart=Date.now();setTimeout(this._waitForRunning.bind(this),q);}},setupPlugin:function(){new h('/ajax/desktop/download').send();this.promptDownload();},updateSidebarLinkVisibility:function(){if(!n.isPluginInstalled()){i.show(g('sidebar-messenger-install-link'));i.show(g('sidebar-messenger-install-separator'));}},_waitForInstall:function(t){var u=JSON.stringify({ref:this.ref});if(n.isPluginInstalled()){m.log('install_success','setup',u);l.logConversion('install_success');o.recheck();new h("/desktop/fbdesktop2/transfer.php").setMethod("POST").setHandler(this._responseHandler.bind(this)).send();k.dismissAll();this.hideMegaphone();return;}if(t<=0){m.log('install_timeout','setup',u);l.logConversion('install_timeout');k.dismissAll();}else setTimeout(this._waitForInstall.bind(this,t-q),q);},_waitForRunning:function(){var t=Date.now()-this._waitForRunningStart;if(o.isAppRunning()){o.transferAuthToken(this._authToken,this._userId);}else if(t<r)setTimeout(this._waitForRunning.bind(this),q);}};e.exports=s;});
__d("legacy:fbdesktop2-install-js",["FbdInstall"],function(a,b,c,d){a.FbdInstall=b('FbdInstall');},3);
__d("legacy:fbdesktop-conversion-tracking",["FbdConversionTracking"],function(a,b,c,d){a.FbdConversionTracking=b('FbdConversionTracking');},3);
__d("SidebarTicker",["Arbiter","ChatSidebar","CSS","DOM","Run","TickerController","$","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ChatSidebar'),i=b('CSS'),j=b('DOM'),k=b('Run'),l=b('TickerController'),m=b('$'),n=b('copyProperties');function o(){this._ticker=m('pagelet_ticker');this._initSubscriptions();if(i.hasClass(document.documentElement,'sidebarMode'))this._onSidebarShow();}o.hide=function(){k.onAfterLoad(function(){j.remove(m('pagelet_ticker'));j.remove(j.find(document.body,'div.fbSidebarGripper'));h.resize();});};n(o.prototype,{_initSubscriptions:function(){this._subscriptions=[g.subscribe('sidebar/show',this._onSidebarShow.bind(this))];},_onSidebarShow:function(){l.show(this._ticker);}});e.exports=o;});
__d("SidebarTickerResizer",["Arbiter","AsyncRequest","ChatSidebar","SimpleDrag","$"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncRequest'),i=b('ChatSidebar'),j=b('SimpleDrag'),k=b('$'),l=1e-07;function m(n){var o=k('pagelet_ticker'),p=o.parentNode,q=this._saveResizedState.bind(this),r,s,t,u=function(x,event){r=event.clientY;s=o.offsetHeight;t=p.offsetHeight;},v=function(x,event){var y=s+(event.clientY-r),z=100-(((t-y)/t)*100);z=Math.max(l,Math.min(90,z));o.style.height=z+'%';if(x=='end'){q(z);g.inform('Ticker/resized');}i.resize();},w=new j(n);w.subscribe('start',u);w.subscribe(['update','end'],v);}m.prototype._saveResizedState=function(n){new h('/ajax/feed/ticker/resize').setData({height:''+n}).setMethod('POST').send();};e.exports=m;});
__d("legacy:megaphone",["MegaphoneHelper"],function(a,b,c,d){a.MegaphoneHelper=b('MegaphoneHelper');},3);